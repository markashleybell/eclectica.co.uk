<html> 
   <head> 
     <title>Client Flow Example</title> 
   </head> 
   <body> 
   <div id="fb-root"></div>
<script>
    var appId = '242096249189840';
    //var pageId = '79960040734';
    var pageId = '148017585302288';
    
    var channel = '//eclectica.co.uk/channel.html';


  window.fbAsyncInit = function() {
    FB.init({
      appId      : appId, // App ID
      channelUrl : channel, // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      oauth      : true, // enable OAuth 2.0
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
    
    FB.login(function (response){
    
        console.log(response);
    
        FB.api('/' + pageId, { fields: 'access_token' }, function(apiresponse){
        
            console.log(apiresponse);
            
            var body = 'TEST';
            var url = 'http://eclectica.co.uk/randy-hage-new-york-storefronts';
//            
//            FB.api('/' + pageId + '/feed', 'post', { message: body, access_token: apiresponse.access_token }, function(rs) {
//              if (!rs || rs.error) {
//                alert('Error occured');
//              } else {
//                alert('Post ID: ' + rs.id);
//              }
//            });
            
            FB.api('/' + pageId + '/feed', 'post', { message: body, link: url, access_token: apiresponse.access_token }, function(rs) {
              if (!rs || rs.error) {
                alert('Error occured');
              } else {
                alert('Post ID: ' + rs.id);
              }
            });
            
        
        });
    
//        FB.api('/me/accounts',function(apiresponse){
//        
//        console.log(apiresponse);
//        
//        var data=apiresponse['data'];
//        var ids = new Array();
//        for(var i=0; i<data.length; i++){
//        ids[i]=data[i].id;
//        }
//        console.log(ids);
//        });



    },{scope:'manage_pages,publish_stream'});
    
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     d.getElementsByTagName('head')[0].appendChild(js);
   }(document));
</script>
   </body> 
  </html>