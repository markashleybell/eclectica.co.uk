@model eclectica.co.uk.Web.Models.CommentManageViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/AdminLayout.cshtml";
}

@section head {

    <script type="text/javascript">

        $(function () {

            $('.delete-link').bind('click', function () {

                return confirm('Are you sure?');

            });

        });

    </script>

}

@section content {

	<div class="post">
	    <h1>Manage Comments</h1>

        <p>@Html.ActionLink("Create new Comment", "Create") &raquo;</p>

        @if(Model.Comments.Count() > 0) 
        {
            <table id="postmanager">
            <tr>
                <th>Comment</th>
                <th style="width: 90px;">Edit</th>
            </tr>

            @foreach (var comment in Model.Comments)
            {
                <tr>
                    <td><span class="comment-entry-url">On <a href="http://eclectica.co.uk/@comment.EntryUrl">@comment.EntryUrl</a>: </span>@comment.Body.StripHtml()</td>
                    <td>@Html.ActionLink("Edit", "Edit", new { id = comment.CommentID }, null) | @Html.ActionLink("Delete", "Delete", new { id = comment.CommentID }, new { @class = "delete-link" })</td>
                </tr>
            
            }
            
            </table>
        }

    </div>

}